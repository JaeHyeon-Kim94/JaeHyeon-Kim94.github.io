<!DOCTYPE html><html lang="ko" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="generator" content="Jekyll v4.3.2" /><meta property="og:title" content="Spring Web Mvc" /><meta property="og:locale" content="ko" /><meta name="description" content="Spring Web MVC" /><meta property="og:description" content="Spring Web MVC" /><link rel="canonical" href="https://jaehyeon-kim94.github.io/posts/Spring-Web-MVC/" /><meta property="og:url" content="https://jaehyeon-kim94.github.io/posts/Spring-Web-MVC/" /><meta property="og:site_name" content="JaeHyeon" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-05-18T00:00:00+09:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="Spring Web Mvc" /><meta name="twitter:site" content="@twitter_username" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-06-01T08:57:44+09:00","datePublished":"2022-05-18T00:00:00+09:00","description":"Spring Web MVC","headline":"Spring Web Mvc","mainEntityOfPage":{"@type":"WebPage","@id":"https://jaehyeon-kim94.github.io/posts/Spring-Web-MVC/"},"url":"https://jaehyeon-kim94.github.io/posts/Spring-Web-MVC/"}</script><title>Spring Web Mvc | JaeHyeon</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="JaeHyeon"><meta name="application-name" content="JaeHyeon"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@1.0.1/dist/bootstrap-toc.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get MODE_ATTR() { return "data-mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } static get ID() { return "mode-toggle"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } let self = this; /* always follow the system prefers */ this.sysDarkPrefers.addEventListener("change", () => { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.notify(); }); } /* constructor() */ get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode === ModeToggle.DARK_MODE; } get isLightMode() { return this.mode === ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer)) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } setDark() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_ATTR, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_ATTR); sessionStorage.removeItem(ModeToggle.MODE_KEY); } /* Notify another plugins that the theme mode has changed */ notify() { window.postMessage({ direction: ModeToggle.ID, message: this.modeStatus }, "*"); } } /* ModeToggle */ const toggle = new ModeToggle(); function flipMode() { if (toggle.hasMode) { if (toggle.isSysDarkPrefer) { if (toggle.isLightMode) { toggle.clearMode(); } else { toggle.setLight(); } } else { if (toggle.isDarkMode) { toggle.clearMode(); } else { toggle.setDark(); } } } else { if (toggle.isSysDarkPrefer) { toggle.setLight(); } else { toggle.setDark(); } } toggle.notify(); } /* flipMode() */ </script><body data-spy="scroll" data-target="#toc" data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> </a></div><div class="site-title mt-3"> <a href="/">JaeHyeon</a></div><div class="site-subtitle font-italic">학습 정리용 블로그</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/about/" class="nav-link"> <i class="fa-fw fas fa-info-circle ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <button class="mode-toggle btn" aria-label="Switch Mode"> <i class="fas fa-adjust"></i> </button> <span class="icon-border"></span> <a href="https://github.com/JaeHyeon-Kim94" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['',''].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Spring Web Mvc</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>Spring Web Mvc</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1652799600" data-df="ll" data-toggle="tooltip" data-placement="bottom"> May 18, 2022 </em> </span> <span> Updated <em class="" data-ts="1654041464" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Jun 1, 2022 </em> </span><div class="d-flex justify-content-between"> <span> By <em> <a href="https://twitter.com/username">JaeHyeon-Kim</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1465 words"> <em>8 min</em> read</span></div></div></div><div class="post-content"><ol><li><p><strong>Spring Web MVC</strong></p><p>1.1 <strong>DispatchServlet</strong></p><p>DispatcherServlet은 다른 Servlet처럼 Java config 혹은 web.xml을 통해 선언되고 mapping 되어야 한다. 차례로 DispatcherServlet은 요청 매핑, 뷰 결정, 예외 처리 등등을 위해 필요한 위임 요소들을 찾기 위해 스프링 설정을 이용한다.</p><p><br /><strong>DispatcherServlet의 등록 및 초기화를 위한 Java config 예제</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebApplicationInitializer</span> <span class="kd">implements</span> <span class="nc">WebApplicationInitializer</span><span class="o">{</span>
     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStartup</span><span class="o">(</span><span class="nc">ServletContext</span> <span class="n">servletContext</span><span class="o">){</span>
     <span class="c1">// Load Spring web application configuration</span>
         <span class="nc">AnnotationConfigWebApplicationContext</span> <span class="n">context</span> 
                     <span class="o">=</span> <span class="k">new</span> <span class="nc">AnnotationConfigWebApplicationContext</span><span class="o">();</span>
         <span class="n">context</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="nc">AppConfig</span><span class="o">.</span><span class="na">class</span><span class="o">);</span>
            
         <span class="c1">// Create and register the DispatcherServlet</span>
         <span class="nc">DispatcherServlet</span> <span class="n">servlet</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">DispatcherServlet</span><span class="o">(</span><span class="n">context</span><span class="o">);</span>
         <span class="nc">ServletRegistration</span><span class="o">.</span><span class="na">Dynamic</span> <span class="n">registration</span> 
                     <span class="o">=</span> <span class="n">servletContext</span><span class="o">.</span><span class="na">addServlet</span><span class="o">(</span><span class="s">"app"</span><span class="o">,</span> <span class="n">servlet</span><span class="o">);</span>
         <span class="n">registration</span><span class="o">.</span><span class="na">setLoadOnStartup</span><span class="o">(</span><span class="mi">1</span><span class="o">);</span>
         <span class="n">registration</span><span class="o">.</span><span class="na">addMapping</span><span class="o">(</span><span class="s">"/app/*"</span><span class="o">);</span>
         <span class="o">}</span>
     <span class="o">}</span>
</pre></table></code></div></div><blockquote><p>게다가 ServletContext API를 사용함으로써, <code class="language-plaintext highlighter-rouge">AbstractAnnotationConfigDispatcherServletInitializer</code>를 상속받고 특정 메서드들을 오버라이드 할 수 있다.</p></blockquote><blockquote><p>프로그래밍적인 사용 사례의 경우에는(?), <code class="language-plaintext highlighter-rouge">GenericWebApplicationContext</code>이 <code class="language-plaintext highlighter-rouge">AbstractAnnotationConfigDispatcherServletInitializer</code>의 대안이 될 수 있다.</p></blockquote><p><br /><strong>DispatcherServlet의 등록 및 초기화를 위한 web.xml 설정 예제</strong></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
</pre><td class="rouge-code"><pre> <span class="nt">&lt;web-app&gt;</span>
     <span class="nt">&lt;listener&gt;</span>
         <span class="nt">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="nt">&lt;/listener-class&gt;</span>
     <span class="nt">&lt;/listener&gt;</span>
     <span class="nt">&lt;context-param&gt;</span>
         <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
         <span class="nt">&lt;param-value&gt;</span>/WEB-INF/app-context.xml<span class="nt">&lt;/param-value&gt;</span>
     <span class="nt">&lt;/context-param&gt;</span>    
     <span class="nt">&lt;servlet&gt;</span>
         <span class="nt">&lt;servlet-name&gt;</span>app<span class="nt">&lt;/servlet-name&gt;</span>
         <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
         <span class="nt">&lt;init-param&gt;</span>
             <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
             <span class="nt">&lt;param-value&gt;&lt;/param-value&gt;</span>
         <span class="nt">&lt;/init-param&gt;</span>
         <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
     <span class="nt">&lt;/servlet&gt;</span>
     <span class="nt">&lt;servlet-mapping&gt;</span>
         <span class="nt">&lt;servlet-name&gt;</span>app<span class="nt">&lt;/servlet-name&gt;</span>
         <span class="nt">&lt;url-pattern&gt;</span>/app/*<span class="nt">&lt;/url-pattern&gt;</span>
     <span class="nt">&lt;/servlet-mapping&gt;</span>
 <span class="nt">&lt;/web-app&gt;</span>
</pre></table></code></div></div><blockquote><p>스프링부트는 다른 초기화 과정을 따르는데, 서블릿 컨테이너의 라이프사이클보다는 스프링 configuration을 사용하여 자기자신과 내장 서블릿 컨테이너를 등록한다.</p></blockquote><p><br /> 1.1.1 <strong>Context Hierarchy</strong> <br />DispatcherServlet은 WebApplicationContext를 자신의 설정으로 간주한다. 하나의 WebApplicationContext를 사용할 수도 있고, root WebApplicationContext를 공유하고 각각 자신의 WebApplicationContext 설정을 가진 DispatcherServlet들에게 공유시킬 수도 있다. root WebApplicationContext는 주로 data repository, business service와 같이 여러 servlet 인스턴스들에게 공유될 기초적(기반적) bean들을 포함하고 있다.</p><p><img data-src="../../assets/img/mvc-context-hierarchy.png" alt="mvc-context-hierarchy" data-proofer-ignore></p><p><strong>WebApplicationContext 계층구조 설정 예제</strong></p><p><strong>Java방식</strong></p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebAppInitializer</span> 
         <span class="kd">extends</span> <span class="nc">AbstractAnnotationConfigDispatcherServletInitializer</span> <span class="o">{</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getRootConfigClasses</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="o">{</span> <span class="nc">RootConfig</span><span class="o">.</span><span class="na">class</span> <span class="o">};</span>
     <span class="o">}</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getServletConfigClasses</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="o">{</span> <span class="nc">App1Config</span><span class="o">.</span><span class="na">class</span> <span class="o">};</span>
     <span class="o">}</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">String</span><span class="o">[]</span> <span class="nf">getServletMappings</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">"/app1/*"</span> <span class="o">};</span>
     <span class="o">}</span>
 <span class="o">}</span>
</pre></table></code></div></div><p><strong>xml방식</strong></p><div class="language-xml highlighter-rouge"><div class="code-header"> <span data-label-text="XML"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
</pre><td class="rouge-code"><pre> <span class="nt">&lt;web-app&gt;</span>

     <span class="nt">&lt;listener&gt;</span>
         <span class="nt">&lt;listener-class&gt;</span>org.springframework.web.context.ContextLoaderListener<span class="nt">&lt;/listener-class&gt;</span>
     <span class="nt">&lt;/listener&gt;</span>

     <span class="nt">&lt;context-param&gt;</span>
         <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
         <span class="nt">&lt;param-value&gt;</span>/WEB-INF/root-context.xml<span class="nt">&lt;/param-value&gt;</span>
     <span class="nt">&lt;/context-param&gt;</span>

     <span class="nt">&lt;servlet&gt;</span>
         <span class="nt">&lt;servlet-name&gt;</span>app1<span class="nt">&lt;/servlet-name&gt;</span>
         <span class="nt">&lt;servlet-class&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="nt">&lt;/servlet-class&gt;</span>
         <span class="nt">&lt;init-param&gt;</span>
             <span class="nt">&lt;param-name&gt;</span>contextConfigLocation<span class="nt">&lt;/param-name&gt;</span>
             <span class="nt">&lt;param-value&gt;</span>/WEB-INF/app1-context.xml<span class="nt">&lt;/param-value&gt;</span>
         <span class="nt">&lt;/init-param&gt;</span>
         <span class="nt">&lt;load-on-startup&gt;</span>1<span class="nt">&lt;/load-on-startup&gt;</span>
     <span class="nt">&lt;/servlet&gt;</span>

     <span class="nt">&lt;servlet-mapping&gt;</span>
         <span class="nt">&lt;servlet-name&gt;</span>app1<span class="nt">&lt;/servlet-name&gt;</span>
         <span class="nt">&lt;url-pattern&gt;</span>/app1/*<span class="nt">&lt;/url-pattern&gt;</span>
     <span class="nt">&lt;/servlet-mapping&gt;</span>

 <span class="nt">&lt;/web-app&gt;</span>
</pre></table></code></div></div><p>계층구조가 필요 없다면 java설정의 경우에는 getRootConfigClasses()를 통해 모든 설정을 받고 getServletConfigClasses()는 null을 리턴하도록 할 수 있으며, xml 설정의 경우에는 root context만 사용하고 contextConfigLocation을 비워두도록 한다.</p><p><br /> //TODO..정리필요 <br /> 1.1.2 Special Bean Types <br /><a href="https://docs.spring.io/spring-framework/docs/5.3.19/reference/html/web.html#mvc-servlet-special-bean-types">link</a></p><p>1.1.3 Web MVC Config <br />애플리케이션은 상기한 Special Bean Types에 있는, 요청을 처리하는데 있어서 필요한 구조적 Bean들을 선언할 수 있다. <code class="language-plaintext highlighter-rouge">DispatcherServlet</code>은 <code class="language-plaintext highlighter-rouge">WebApplicationContext</code>에서 각각의 special bean을 확인한다. 만약 일치하는 bean type이 없다면, <code class="language-plaintext highlighter-rouge">DispatcherServlet.properties</code>에 있는 default types로 돌아온다.</p><p>대부분의 경우, MVC Config는 최고의 시작점이다. Java 혹은 XML에 필요한 bean들을 선언하고, 상위 수준의 설정 callback API을 커스터마이즈 할 수 있게 한다.</p><blockquote><p>스프링부트에서는 Java bean 설정을 사용하며 추가적인 여러 편의성 옵션들을 제공한다.</p></blockquote><p>1.1.4 Servlet Config Servlet3.0 이상의 환경에서, 서블릿 컨테이너를 web.xml 대신 프로그래밍적으로(자바 빈을 말하는듯) 구성할지, web.xml과 같이 할지를 선택할 수 있음. 다음은 DispatcherServlet을 등록하는 예제임.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre> <span class="kn">import</span> <span class="nn">org.springframework.web.WebApplicationInitializer</span><span class="o">;</span>

 <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebApplicationInitializer</span> <span class="kd">implements</span> <span class="nc">WebApplicationInitializer</span><span class="o">{</span>
     <span class="nd">@Override</span>
     <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onStartup</span><span class="o">(</span><span class="nc">ServletContext</span> <span class="n">container</span><span class="o">){</span>
         <span class="nc">XmlWebApplicationContext</span> <span class="n">context</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">XmlWebApplicationContext</span><span class="o">();</span>
         <span class="n">context</span><span class="o">.</span><span class="na">setConfigLocation</span><span class="o">(</span><span class="s">"/WEB-INF/spring/dispatcher-config.xml"</span><span class="o">);</span>

         <span class="nc">ServletRegistration</span><span class="o">.</span><span class="na">Dynamic</span> <span class="n">registration</span> 
                 <span class="o">=</span> <span class="n">container</span><span class="o">.</span><span class="na">addServlet</span><span class="o">(</span><span class="s">"dispatcher"</span><span class="o">,</span> <span class="k">new</span> <span class="n">registration</span><span class="o">.</span><span class="na">setLoadOnStartup</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
         <span class="n">registration</span><span class="o">.</span><span class="na">addMapping</span><span class="o">(</span><span class="s">"/"</span><span class="o">);</span>
     <span class="o">}</span>
 <span class="o">}</span>
</pre></table></code></div></div><p><code class="language-plaintext highlighter-rouge">WebApplicationInitializer</code>는 Spring MVC에서 지원하는 인터페이스로서, 당신의 구현체들이 탐지되고 서블릿 컨테이너의 초기화에 자동적으로 사용된다는 것을 보증합니다. <code class="language-plaintext highlighter-rouge">WebApplicationInitializer</code>의 디폴트 구현체인 <code class="language-plaintext highlighter-rouge">AbstractDispatcherServletInitializer</code>는 서블릿 매핑과 디스패쳐 서블릿의 위치를 특정하는 메서드를 오버라이딩 함으로써 디스패쳐 서블릿을 좀 더 손쉽게 등록할 수 있도록 해줍니다.</p><p>다음은 추천하는 자바 빈 기반의 설정 방식의 예 입니다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebInitializer</span> <span class="kd">extends</span> <span class="nc">AbstractAnnotationConfigDispatcherServletInitializer</span><span class="o">{</span>
         <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getRootConfigClasses</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
     <span class="o">}</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="n">getServletConfigClasses</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nc">Class</span><span class="o">&lt;?&gt;[]</span> <span class="o">{</span> <span class="nc">MyWebConfig</span><span class="o">.</span><span class="na">class</span> <span class="o">};</span>
     <span class="o">}</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">String</span><span class="o">[]</span> <span class="nf">getServletMappings</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">"/"</span> <span class="o">};</span>
     <span class="o">}</span>
 <span class="o">}</span>
</pre></table></code></div></div><p>만약 당신이 XML 기반의 스프링 설정을 사용하고 있다면, 다음처럼 <code class="language-plaintext highlighter-rouge">AbstractDispatcherServletInitializer</code>를 직접적으로 상속받으세요.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebAppInitializer</span> <span class="kd">extends</span> <span class="nc">AbstractDispatcherServletInitializer</span> <span class="o">{</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">WebApplicationContext</span> <span class="nf">createRootApplicationContext</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="kc">null</span><span class="o">;</span>
     <span class="o">}</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">WebApplicationContext</span> <span class="nf">createServletApplicationContext</span><span class="o">()</span> <span class="o">{</span>
         <span class="nc">XmlWebApplicationContext</span> <span class="n">cxt</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">XmlWebApplicationContext</span><span class="o">();</span>
         <span class="n">cxt</span><span class="o">.</span><span class="na">setConfigLocation</span><span class="o">(</span><span class="s">"/WEB-INF/spring/dispatcher-config.xml"</span><span class="o">);</span>
         <span class="k">return</span> <span class="n">cxt</span><span class="o">;</span>
     <span class="o">}</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">String</span><span class="o">[]</span> <span class="nf">getServletMappings</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nc">String</span><span class="o">[]</span> <span class="o">{</span> <span class="s">"/"</span> <span class="o">};</span>
     <span class="o">}</span>
 <span class="o">}</span>
</pre></table></code></div></div><p>또한 <code class="language-plaintext highlighter-rouge">AbstractDispatcherServletInitializer</code>는 <code class="language-plaintext highlighter-rouge">Filter</code> 인스턴스들을 DispatcherServlet에 자동적으로 매핑될 수 있도록 편리한 방법을 제공하는데, 다음이 그 예시입니다.</p><div class="language-java highlighter-rouge"><div class="code-header"> <span data-label-text="Java"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre> <span class="kd">public</span> <span class="kd">class</span> <span class="nc">MyWebAppInitializer</span> <span class="kd">extends</span> <span class="nc">AbstractDispatcherServletInitializer</span> <span class="o">{</span>

     <span class="c1">// ...</span>

     <span class="nd">@Override</span>
     <span class="kd">protected</span> <span class="nc">Filter</span><span class="o">[]</span> <span class="nf">getServletFilters</span><span class="o">()</span> <span class="o">{</span>
         <span class="k">return</span> <span class="k">new</span> <span class="nc">Filter</span><span class="o">[]</span> <span class="o">{</span>
             <span class="k">new</span> <span class="nf">HiddenHttpMethodFilter</span><span class="o">(),</span> <span class="k">new</span> <span class="nc">CharacterEncodingFilter</span><span class="o">()</span> <span class="o">};</span>
     <span class="o">}</span>
 <span class="o">}</span>
</pre></table></code></div></div><p>각각의 필터는 그것의 구체적인 타입을 기반으로 한 이름으로 등록되고, 자동적으로 <code class="language-plaintext highlighter-rouge">DispatcherServlet</code>에 매핑됩니다.</p><p><code class="language-plaintext highlighter-rouge">AbstractDispaterServletInitializer</code>의 protected method <code class="language-plaintext highlighter-rouge">isAsyncSupported</code>는 비동기적인 지원을 가능하게 하는 단일 공간(?)을 <code class="language-plaintext highlighter-rouge">DispatcherServlet</code>에게 제공하며, 모든 필터들이 매핑됩니다. zero config는 true.</p><p>마지막으로, <code class="language-plaintext highlighter-rouge">DispatcherServlet</code>을 커스터마이즈 할 필요가 있다면 createDispatcherServlet 메서드를 오버라이드 하세요.</p></ol><hr /><h1 id="reference">Reference</h1><p><a href="https://docs.spring.io/spring-framework/docs/5.3.19/reference/html/web.html#mvc">https://docs.spring.io/spring-framework/docs/5.3.19/reference/html/web.html#mvc</a></p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/spring/'>Spring</a>, <a href='/categories/mvc/'>MVC</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/spring/" class="post-tag no-text-decoration" >spring</a> <a href="/tags/springmvc/" class="post-tag no-text-decoration" >springmvc</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Spring+Web+Mvc+-+JaeHyeon&url=https%3A%2F%2Fjaehyeon-kim94.github.io%2Fposts%2FSpring-Web-MVC%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Spring+Web+Mvc+-+JaeHyeon&u=https%3A%2F%2Fjaehyeon-kim94.github.io%2Fposts%2FSpring-Web-MVC%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fjaehyeon-kim94.github.io%2Fposts%2FSpring-Web-MVC%2F&text=Spring+Web+Mvc+-+JaeHyeon" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/RAID-LVM/">RAID와 LVM</a><li><a href="/posts/%ED%95%98%EB%93%9C/">하드 디스크 관리</a><li><a href="/posts/%EC%BB%A4%EB%84%90%EA%B3%BC-%EB%AA%A8%EB%93%88/">커널과 모듈</a><li><a href="/posts/%EB%A7%81%ED%81%AC/">링크</a><li><a href="/posts/CRON%EA%B3%BC-AT/">cron과 at</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/hibernate/">hibernate</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/data-structure/">data structure</a> <a class="post-tag" href="/tags/authentication/">authentication</a> <a class="post-tag" href="/tags/authorization/">authorization</a> <a class="post-tag" href="/tags/chirpy/">chirpy</a> <a class="post-tag" href="/tags/jwt/">jwt</a> <a class="post-tag" href="/tags/oauth2/">oauth2</a> <a class="post-tag" href="/tags/security/">security</a></div></div></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="tail-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Spring-Security(5)-JWT-%EA%B2%80%EC%A6%9D/"><div class="card-body"> <em class="small" data-ts="1675954800" data-df="ll" > Feb 10, 2023 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Spring Security(5) - JWT 검증</h3><div class="text-muted small"><p> JWT 검증 이해 선행 지식 JWT 포스트 암호화</p></div></div></a></div><div class="card"> <a href="/posts/build.gradle%EC%9D%98-dependencies-configuration/"><div class="card-body"> <em class="small" data-ts="1651762800" data-df="ll" > May 6, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>build.gradle의 dependencies configuration</h3><div class="text-muted small"><p> gradle document 링크 1.Java Library Plugin 설정 구성 녹색은 의존성 선언시 사용하는 키워드 파랑색은 클래스 패스. compileClasspath는 compileOnly와 implementation, runtimeClasspath는 runtimeOnly와 implementation과 연결되어 있는 걸 ...</p></div></div></a></div><div class="card"> <a href="/posts/Log4j2/"><div class="card-body"> <em class="small" data-ts="1652022000" data-df="ll" > May 9, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>Log4j2</h3><div class="text-muted small"><p> Springboot, Log4j, gradle 1. 의존성 설정 spring-boot-starter-web은 logback이 default 로깅 모듈이기 때문에 log4j2 의존성을 그대로 추가하면 multiple binding error가 발생한다. 따라서 spring-boot-starter-logging을 exclude. configu...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/%EC%88%9C%EC%84%9C%EB%8F%84/" class="btn btn-outline-primary" prompt="Older"><p>순서도</p></a> <a href="/posts/%EC%9D%B4%EB%84%88-%ED%81%B4%EB%9E%98%EC%8A%A4%EC%99%80-%EC%9D%B4%EB%84%88-%EC%9D%B8%ED%84%B0%ED%8E%98%EC%9D%B4%EC%8A%A4/" class="btn btn-outline-primary" prompt="Newer"><p>이너 클래스와 이너 인터페이스</p></a></div></div></div></div><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center text-muted"><div class="footer-left"><p class="mb-0"> © 2023 <a href="https://twitter.com/username">JaeHyeon-Kim</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/hibernate/">hibernate</a> <a class="post-tag" href="/tags/jpa/">jpa</a> <a class="post-tag" href="/tags/linux/">linux</a> <a class="post-tag" href="/tags/data-structure/">data structure</a> <a class="post-tag" href="/tags/authentication/">authentication</a> <a class="post-tag" href="/tags/authorization/">authorization</a> <a class="post-tag" href="/tags/chirpy/">chirpy</a> <a class="post-tag" href="/tags/jwt/">jwt</a> <a class="post-tag" href="/tags/oauth2/">oauth2</a> <a class="post-tag" href="/tags/security/">security</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lozad/dist/lozad.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/ko.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script>
