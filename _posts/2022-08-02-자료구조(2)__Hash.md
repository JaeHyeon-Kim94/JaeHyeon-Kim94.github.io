---
categories: [자료구조]
tags: [data structure, hash]
---

## Hash란

 - **임의의 길이를 가진 원 데이터가 매핑된** **특정한 길이의 데이터**. 해시값, 해시코드 등으로도 지칭.
 - 매핑은 해시 함수를 통해 이루어지며 이러한 과정을 해싱이라고 하는듯.


 - 해싱의 과정
   - `키(Key) -> 해시 함수 -> 해시값`
   - Key Value 형식의 데이터가 있을 때, `Key`는 `해시 함수(Hashing)`를 통해 데이터가 있거나 저장될 `해시 테이블의 주소(해시값)`를 계산하게 된다. 
   빠른 속도로 데이터 접근 및 저장 가능. 이는 다른 선형 자료 구조가 탐색이나 삽입에 시간이 소요되는 것과 비교됨.

<br>

 - **Hashing & Hash Function** : 상기한 내용을 통해 알 수 있듯이, 해시 함수 혹은 해싱이라는 과정을 통해 Key라는 원 데이터를 고정된 길이의 해시값으로 바꾸게 된다.
   - 좋은 해싱
     - 키 값을 고르게 분포시킴. 특정 위치에만 밀집(clustering)되면 충돌 가능성이 높아지거나 재탐색의 시간이 소요될 수 있기 때문.
     - 빠른 계산
     - 해시충돌의 최소화
       - 해시충돌이란 키 값이 다르지만 해시 함수의 결과값이 동일한 경우를 의미.
  - Key를 기준으로 데이터가 관리되기 때문에 순서가 존재하지 않으며, Key는 중복되지 않는 고유한 값을 사용해야 한다.

    
<br>

 - **HashTable** : Key값을 변환시킨 해시값을 index로 삼아 원데이터(Key & Data)를 저장하는 자료구조.
   - 해시테이블에 있어서 중요한 것은 충돌을 최소화 해야 한다는 것.
     - 해시테이블의 장점은 빠른 데이터 접근 및 저장이 가능하다는 점(시간복잡도 : O(1))인데, 충돌이 발생하게 되면 탐색 및 삭제 연산이 최악의 경우 O(N)이 될 수도 있음.(모든 원 데이터의 키값이 하나의 동일한 해시값으로 매핑된 경우).
     - 비둘기 집 원리 : N+1개의 물건을 N개의 상자에 넣었을 때, 적어도 한 상자에는 두 개 이상의 물건이 들어있다.
     - Birthday Problem : 사람이 임의로 모였을 때, 생일이 같은 두 명이 존재할 확률을 구하는 문제
     - 생일이 가능한 가짓수는 윤달의 경우를 포함하여 366개. 367명 이상의 사람이 모인다면 비둘기집 원리에 따라 생일이 같은 두 명이 반드시 존재하며, 23명 이상만 모여도 그 중 두명이 생일이 같을 확률은 1/2를 넘음. 
     - 따라서 데이터가 많아질수록 충돌 발생 가능성도 높아지기 때문에 충돌을 최소화하여 연산 속도를 빠르게 하는 것이 관건이며, 충돌 최소화를 위해선 `해시테이블의 구조 개선`, `해시 함수 개선`이 있음.

 
 - **해시테이블의 구조 개선**
   - Chaining
     - 충돌 발생하더라도 동일한 버킷에 저장하는데, 이 때 Linked List나 Tree를 이용해 데이터를 저장함. 
     - 충돌이 다수 발생하면 최악의 경우 O(N)의 시간복잡도가 소요될 수 있음.
   - Open Addressing
     - Linear Probing : 해시 충돌시 n칸을 건너뛴 다음 버킷에 저장
       - 계산 단순
       - 검색 시간이 많이 소요. n칸을 건너 뛰었음에도 다음 인덱스에 데이터가 있다면 이 과정을 반복하게 됨.
       - 데이터들이 특정 위치에만 밀집(clustering)
     - Quadratic Probing : 해시 충돌시 n^2칸을 건너뛴 다음 버킷에 저장
       - clustering 문제를 해결.
       - but 해시값이 같다면 이 방법도 clustering 문제를 효과적으로 해결하기 어려움.
     - Double Hashing : 해시 값에 다른 해시 함수를 한번 더 적용
       - 최초의 **해시 값**을 구하고, 해시 충돌 발생시 **이동 폭**을 구함.
       - 최초 해시 값이 같더라도 이동 폭이 다르기 때문에 clustering 문제 해결 가능.


 - **해시 함수 개선**
   - 나눗셈법(Division Method)
     - 해시테이블의 크기를 아는 경우, 테이블의 크기로 키 값을 나눈 나머지를 해시값으로 하는 방법
     - 나눌 때에는 나누는 수를 짝수는 피하고 되도록 소수를 사용하는 것이 좋음.
   - 곱셈법(Multiplication Method)
     - 숫자로 된 키가 k이고, A는 0과 1 사이의 실수일 때 다음과 같이 정의되며, m의 크기는 중요하지 않으며 보통 2의 제곱수로 정한다고 함.
     - 나눗셈법보다는 느림.
     - h(k)=(kAmod1)*m
### Reference
[해쉬 테이블(Hash Table)이란?](https://baeharam.netlify.app/posts/data%20structure/hash-table)