---
categories: [자료구조]
tags: [data structure, tree]
---

## 트리

 - 한 노드가 여러 노드를 가리킬 수 있음.
 - 비선형적 자료구조(데이터의 순서가 중요하지 않음. )
 - 그래프
 - 데이터 구조의 계층적인 상하관계의 속성을 표현할 때 사용할 수 있음.
 - 기본적인 데이터 단위를 **노드**라고 하며, 부모가 없는 최상위 노드를 **root**노드라고 하며 단 하나만 존재할 수 있다. 각 노드는 **edge**로 연결되어 있음
 - 상대적인 상하관계는 부모노드와 자식노드로 표현하며, 같은 부모를 가진 노드를 형제노드라고 한다.
 - 자식의 개수를 **차수(degree)**라고 함. 자식이 없는 노드는 **leaf 혹은 terminal(단말), external(외부)**노드라고 함.
 - 루트노드부터 특정 노드까지의 거리를 depth라고 함.
 - 트리는 서브트리로 구성되어 재귀적인 구조를 가진다.

### 트리의 종류

#### 이진 트리
 - 자식 노드가 최대 2개까지만 허용되는 트리
 - 자식 노드는 부모 노드 기준 왼쪽, 오른쪽에 위치할 수 있는데 자식 노드의 위치에 따라 왼쪽 자식노드와 오른쪽 자식노드로 구분됨.
   - 즉, 같은 루트에 같은 자식 노드를 가지고 있더라도 자식노드가 왼쪽에 위치한 경우와 오른쪽에 위치한 경우는 다른 노드로 본다.
 - 정 이진트리(full binary tree), 엄격한(strict) 이진 트리
   - 모든 노드가 2개의 자식을 가지거나 자식이 아예 없을때.
 - 포화 이진트리(perfect binary tree)
   - 모든 노드가 2개의 자식을 가지고, 단말 노드가 같은 레벨일 때.
   - 높이가 h인 포화 이진 트리에서 노드 갯수는 2^h - 1
     - 2^0 + 2^1 + 2^2 + ... + 2^h
   - 단말 노드의 갯수는 2^h
 - 완전 이진 트리(complete binary tree)
   - 마지막 레벨을 제외하고 모든 노드가 채워져야 함.
   - 노드는 왼쪽에서 오른쪽으로 채워짐. (따라서 마지막 레벨의 노드가 왼쪽만 있는 경우는 있어도 오른쪽만 있는 경우는 없다.)

- 이진트리는 일차원 배열로 표현이 가능하다.(왼 -> 오)

- 이진트리의 응용
  - 힙
  - 이진 탐색 트리(Binary Search Tree)
  - B-Tree
  - AVL 트리

- 트리의 경우 특성상 선형적인 다른 자료구조와는 달리 트리 탐색이라는 연산이 존재.


#### 이진 탐색 트리(Binary Search Tree)
 
 - 일반적인 트리의 경우 데이터의 특성에 제약이 없음. 따라서 특정 데이터를 찾기 위해선 모든 노드의 탐색이 이루어져야 함.
 - 따라서 트리의 데이터에 제약을 걸어줌으로써 탐색의 시간 복잡도를 O(N)에서 O(log N)으로 줄일 수 있는 것이 이진 탐색 트리.
 - 이진 트리의 구조에서 노드의 왼쪽 서브 트리에는 루트 노드보다 작은 값,
 - 노드의 오른쪽 서브 트리에는 루트 노드보다 큰 값을 위치시킨다.
 - 그리고 서브 트리는 다시 이진 탐색 트리로 구성되며
 - 중복된 값은 없다.
 - 이러한 특성으로 인해 BST의 최솟값은 가장 왼쪽 아래 노드. 최댓값은 가장 오른쪽에 위치.
 - 중위 탐색을 할 경우 모든 데이터를 정렬된 순서로 가져올 수 있음.
 - 삽입
   - 중복된 데이터가 있을 경우에는 삽입을 하지 않고 종료.
   - 추가된 노드는 트리의 leaf에 삽입한다.
 - 삭제
   - 삭제할 데이터의 위치를 찾고,
   - 삭제할 데이터가 leaf노드인 경우, 한개의 자식 노드를 가진 경우, 두개의 자식 노드를 가진 경우로 나뉜다.
     - 삭제할 데이터가 leaf노드인 경우 : 부모 노드가 가진 해당 노드의 데이터를 null로 갱신.
     - 한개의 자식 노드를 가진 경우 : 해당 노드의 자식노드를 해당 노드의 부모노드로 연결시킨다.
     - 두개의 자식 노드를 가진 경우
       - BST는 한 노드가 왼쪽 서브트리보다는 큰 값을, 오른쪽 서브트리보다는 작은 값을 가진다는 특징을 이용해
       - 해당 노드를 왼쪽 서브트리의 최댓값과 교체하거나
       - 오른쪽 서브트리의 최솟값과 교체하는 방법 두 가지가 있음.
       - 교체 후에는 데이터가 중복되지 않도록 서브 트리의 노드를 지운다.

### 트리 순회

루트노드 방문을 언제 하는가에 따라

 - 전위 탐색(preorder)
   - **루트노드** 방문 > 왼쪽 서브트리를 preorder > 오른쪽 서브트리를 preorder
     - 여기서 preorder는 트리의 재귀적인 특성상 재귀호출. 이후의 inorder, postorder도 같은 의미.
 - 중위 탐색(inorder)
   - 왼쪽 서브트리를 inorder > **루트노드** 방문 > 오른쪽 서브트리 inorder
 - 후위 탐색(postorder)
     - 왼쪽 서브트리를 postorder > 오른쪽 서브트리를 postorder > **루트노드** 방문


 - 트리 순회 예시
 
 - ![트리 순회 예시](../../assets/img/tree-traversal.png)
 
   - 전위 탐색 : **F** - B - A - D - C - E - G - I - H
   - 중위 탐색 : A - B - C - D - E - **F** - G - H - I
   - 후위 탐색 : A - C - E - D - B - H - I - G - **F**
   - 트리 순회 방법에 따라 데이터의 순서가 달라지며, 중위 탐색의 경우 F를 기준으로 왼쪽 오른쪽으로 나뉨.


<!-- AVL트리, 레드-블랙 트리
     - 
   - B- 트리, B+ 트리
   - 세그먼트 트리
   - 트라이 -->
