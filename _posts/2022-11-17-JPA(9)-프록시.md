---
title : JPA(9) - 프록시
categories : [jpa]
tags: [jpa, hibernate]
published : false
---

- 프록시와 즉시로딩/지연로딩
  - 지연로딩 : 엔티티가 실제 사용될 때까지 데이터베이스 조회를 지연하는 것.
  - 프록시 : 지연로딩을 사용하려면 실제 엔티티 객체 대신에 데이터베이스 조회를 지연할 수 있는 가짜 객체가 필요한데, 이를 프록시 객체라고 한다.
    - JPA는 지연 로딩에 대한 구현을 구현체에 위임했고, 앞으로의 내용은 hibernate 구현체에 대한 내용임.
      - hibernate는 지연 로딩 지원을 위한 방법으로 1) 프록시, 2) 바이트코드 수정 두 가지 방법을 제공.


 - em.find를 통해 엔티티를 직접 조회하게 되면 **실제 사용 여부와 무관하게 데이터베이스에서 조회**한다. 따라서 사용 시점까지 지연이 필요하면 **em.getReference()** 메서드를 사용하면 된다.


- 영속성 전이와 고아 객체
